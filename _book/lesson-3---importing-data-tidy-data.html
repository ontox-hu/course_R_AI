<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Lesson 3 - Importing data &amp; tidy data | Intro into R, Reproducible research and machine learning</title>
  <meta name="description" content="Lesson 3 - Importing data &amp; tidy data | Intro into R, Reproducible research and machine learning" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Lesson 3 - Importing data &amp; tidy data | Intro into R, Reproducible research and machine learning" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Lesson 3 - Importing data &amp; tidy data | Intro into R, Reproducible research and machine learning" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="lesson-2---data-types-and-structures-in-r.html"/>
<link rel="next" href="lesson-4---answering-research-questions.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />










<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img style="float:left;" src="images/voorbeeldlogo2.png"></a> <h4 class=".paddingtitel ">DAUR1 </h2></li>
<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-outline"><i class="fa fa-check"></i>Course outline</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-material"><i class="fa fa-check"></i>Course material</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#lessons"><i class="fa fa-check"></i>Lessons</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#exercises"><i class="fa fa-check"></i>Exercises</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#rstudio-server"><i class="fa fa-check"></i>Rstudio server</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#learning-objectives"><i class="fa fa-check"></i>Learning objectives</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html"><i class="fa fa-check"></i>Preparation before the course</a>
<ul>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#lets-get-started"><i class="fa fa-check"></i>Let’s get started!</a>
<ul>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#remarks-before-starting"><i class="fa fa-check"></i>Remarks before starting</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#updating-r-and-rstudio"><i class="fa fa-check"></i>Updating R and RStudio</a>
<ul>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#windows-users-1"><i class="fa fa-check"></i>Windows users</a></li>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#mac-users-1"><i class="fa fa-check"></i>Mac users</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#installRhere"><i class="fa fa-check"></i>Install R</a>
<ul>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#windows"><i class="fa fa-check"></i>Windows</a></li>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#mac"><i class="fa fa-check"></i>Mac</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#install-rstudio"><i class="fa fa-check"></i>Install RStudio</a>
<ul>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#install-rstudio-itself"><i class="fa fa-check"></i>Install RStudio itself</a></li>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#installing-packages"><i class="fa fa-check"></i>Installing packages</a></li>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#loading-packages"><i class="fa fa-check"></i>Loading packages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#if-all-is-still-not-well"><i class="fa fa-check"></i>If all is still not well</a></li>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#reader"><i class="fa fa-check"></i>reader</a></li>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#introduction-to-r"><i class="fa fa-check"></i>Introduction to R</a>
<ul>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#variables-and-functions"><i class="fa fa-check"></i>Variables and functions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#rstudio"><i class="fa fa-check"></i>Rstudio</a>
<ul>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#console"><i class="fa fa-check"></i>Console</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#projects"><i class="fa fa-check"></i>Projects</a>
<ul>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#starting-a-new-project-in-rstudio"><i class="fa fa-check"></i>Starting a new Project in Rstudio</a></li>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#opening-a-project-in-rstudio"><i class="fa fa-check"></i>Opening a project in Rstudio</a></li>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#more-help"><i class="fa fa-check"></i>More help</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preparation-before-the-course.html"><a href="preparation-before-the-course.html#diy"><i class="fa fa-check"></i>DIY</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html"><i class="fa fa-check"></i>Lesson 1 - Introduction to R and RStudio</a>
<ul>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#learning-objectives-1"><i class="fa fa-check"></i>Learning objectives</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#starting-to-work-within-a-project"><i class="fa fa-check"></i>Starting to work within a project</a>
<ul>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#running-code-in-rstudio"><i class="fa fa-check"></i>Running code in Rstudio</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#variables"><i class="fa fa-check"></i>Variables</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#functions"><i class="fa fa-check"></i>Functions</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#packages-and-libraries"><i class="fa fa-check"></i>Packages and libraries</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#the-help-function"><i class="fa fa-check"></i>The help function</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#data-types-and-structures-in-r"><i class="fa fa-check"></i>Data types and structures in R</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#indexing"><i class="fa fa-check"></i>Indexing</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#missing-values"><i class="fa fa-check"></i>Missing values</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#more-complicated-data"><i class="fa fa-check"></i>More complicated data</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#lists"><i class="fa fa-check"></i>Lists</a>
<ul>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#selecting-list-elements"><i class="fa fa-check"></i>Selecting list elements</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#headers"><i class="fa fa-check"></i>Headers</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#dataframes"><i class="fa fa-check"></i>Dataframes</a>
<ul>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#data-analysis-using-dataframes"><i class="fa fa-check"></i>Data analysis using dataframes</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#tibbles"><i class="fa fa-check"></i>Tibbles</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#factors"><i class="fa fa-check"></i>Factors</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#using-functions-drc"><i class="fa fa-check"></i>using functions: drc</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#scripts-and-rmarkdown"><i class="fa fa-check"></i>scripts and Rmarkdown</a>
<ul>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#scripts"><i class="fa fa-check"></i>scripts</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#rmarkdown"><i class="fa fa-check"></i>Rmarkdown</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#bla"><i class="fa fa-check"></i>bla</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#yaml-header"><i class="fa fa-check"></i>YAML header</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#code-chunks"><i class="fa fa-check"></i>Code chunks</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#output-control"><i class="fa fa-check"></i>Output control</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#plain-text-formatting"><i class="fa fa-check"></i>Plain text formatting</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#here-package"><i class="fa fa-check"></i>Here package</a></li>
<li class="chapter" data-level="" data-path="lesson-1---introduction-to-r-and-rstudio.html"><a href="lesson-1---introduction-to-r-and-rstudio.html#creating-a-new-rmarkdown-file"><i class="fa fa-check"></i>Creating a new RMarkdown file</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lesson-2---data-types-and-structures-in-r.html"><a href="lesson-2---data-types-and-structures-in-r.html"><i class="fa fa-check"></i>Lesson 2 - Data types and structures in R</a>
<ul>
<li class="chapter" data-level="" data-path="lesson-2---data-types-and-structures-in-r.html"><a href="lesson-2---data-types-and-structures-in-r.html#learning-objectives-2"><i class="fa fa-check"></i>Learning objectives</a></li>
<li class="chapter" data-level="" data-path="lesson-2---data-types-and-structures-in-r.html"><a href="lesson-2---data-types-and-structures-in-r.html#data-in-r"><i class="fa fa-check"></i>Data in R</a></li>
<li class="chapter" data-level="" data-path="lesson-2---data-types-and-structures-in-r.html"><a href="lesson-2---data-types-and-structures-in-r.html#oefenopdracht-thuis"><i class="fa fa-check"></i>Oefenopdracht (thuis)</a></li>
<li class="chapter" data-level="" data-path="lesson-2---data-types-and-structures-in-r.html"><a href="lesson-2---data-types-and-structures-in-r.html#overview-r-functions-first-two-lessons"><i class="fa fa-check"></i>Overview R functions first two lessons</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lesson-3---importing-data-tidy-data.html"><a href="lesson-3---importing-data-tidy-data.html"><i class="fa fa-check"></i>Lesson 3 - Importing data &amp; tidy data</a>
<ul>
<li class="chapter" data-level="" data-path="lesson-3---importing-data-tidy-data.html"><a href="lesson-3---importing-data-tidy-data.html#learning-objectives-3"><i class="fa fa-check"></i>Learning objectives</a></li>
<li class="chapter" data-level="" data-path="lesson-3---importing-data-tidy-data.html"><a href="lesson-3---importing-data-tidy-data.html#importing-text-files"><i class="fa fa-check"></i>Importing text files</a>
<ul>
<li class="chapter" data-level="" data-path="lesson-3---importing-data-tidy-data.html"><a href="lesson-3---importing-data-tidy-data.html#separators"><i class="fa fa-check"></i>separators</a></li>
<li class="chapter" data-level="" data-path="lesson-3---importing-data-tidy-data.html"><a href="lesson-3---importing-data-tidy-data.html#extracting-numbers"><i class="fa fa-check"></i>extracting numbers</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lesson-3---importing-data-tidy-data.html"><a href="lesson-3---importing-data-tidy-data.html#setting-variable-column-names"><i class="fa fa-check"></i>Setting variable (column) names</a></li>
<li class="chapter" data-level="" data-path="lesson-3---importing-data-tidy-data.html"><a href="lesson-3---importing-data-tidy-data.html#importing-excel-files"><i class="fa fa-check"></i>Importing Excel files</a></li>
<li class="chapter" data-level="" data-path="lesson-3---importing-data-tidy-data.html"><a href="lesson-3---importing-data-tidy-data.html#saving-and-importing-r_objects"><i class="fa fa-check"></i>Saving and importing R_Objects</a></li>
<li class="chapter" data-level="" data-path="lesson-3---importing-data-tidy-data.html"><a href="lesson-3---importing-data-tidy-data.html#inspecting-your-data"><i class="fa fa-check"></i>Inspecting your data</a></li>
<li class="chapter" data-level="" data-path="lesson-3---importing-data-tidy-data.html"><a href="lesson-3---importing-data-tidy-data.html#what-is-tidy-data"><i class="fa fa-check"></i>What is tidy data?</a></li>
<li class="chapter" data-level="" data-path="lesson-3---importing-data-tidy-data.html"><a href="lesson-3---importing-data-tidy-data.html#making-your-data-tidy-gathering"><i class="fa fa-check"></i>Making your data tidy: gathering</a></li>
<li class="chapter" data-level="" data-path="lesson-3---importing-data-tidy-data.html"><a href="lesson-3---importing-data-tidy-data.html#making_your_data_tidy-spreading"><i class="fa fa-check"></i>Making_your_data_tidy: spreading</a></li>
<li class="chapter" data-level="" data-path="lesson-3---importing-data-tidy-data.html"><a href="lesson-3---importing-data-tidy-data.html#making_your_data_tidy-separate"><i class="fa fa-check"></i>Making_your_data_tidy: separate</a></li>
<li class="chapter" data-level="" data-path="lesson-3---importing-data-tidy-data.html"><a href="lesson-3---importing-data-tidy-data.html#checking-normality"><i class="fa fa-check"></i>Checking normality</a></li>
<li class="chapter" data-level="" data-path="lesson-3---importing-data-tidy-data.html"><a href="lesson-3---importing-data-tidy-data.html#map-functions"><i class="fa fa-check"></i>map functions</a></li>
<li class="chapter" data-level="" data-path="lesson-3---importing-data-tidy-data.html"><a href="lesson-3---importing-data-tidy-data.html#histograms"><i class="fa fa-check"></i>Histograms</a></li>
<li class="chapter" data-level="" data-path="lesson-3---importing-data-tidy-data.html"><a href="lesson-3---importing-data-tidy-data.html#overview-r-functions"><i class="fa fa-check"></i>Overview R functions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html"><i class="fa fa-check"></i>Lesson 4 - Answering research questions</a>
<ul>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#learning-objectives-4"><i class="fa fa-check"></i>Learning objectives</a></li>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#difference-questions"><i class="fa fa-check"></i>Difference Questions</a>
<ul>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#practice-making-bar-charts"><i class="fa fa-check"></i>Practice making bar charts</a></li>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#two-sample-t-tests"><i class="fa fa-check"></i>Two sample t-tests</a></li>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#unpaired-two-sample-t-test"><i class="fa fa-check"></i>Unpaired two sample t test</a></li>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#paired-two-sample-t-test"><i class="fa fa-check"></i>Paired two sample t test</a></li>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#plotting-significance"><i class="fa fa-check"></i>Plotting significance</a></li>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#anova"><i class="fa fa-check"></i>ANOVA</a></li>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#one-sample-t-test"><i class="fa fa-check"></i>One sample t-test</a></li>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#detection"><i class="fa fa-check"></i>Detection</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#descriptive-questions"><i class="fa fa-check"></i>Descriptive Questions</a>
<ul>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#line-graphs"><i class="fa fa-check"></i>Line graphs</a></li>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#boxplots"><i class="fa fa-check"></i>Boxplots</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#outliers"><i class="fa fa-check"></i>Outliers</a></li>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#relation-questions"><i class="fa fa-check"></i>Relation Questions</a>
<ul>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#correlation"><i class="fa fa-check"></i>Correlation</a></li>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#regression"><i class="fa fa-check"></i>Regression</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#checklists"><i class="fa fa-check"></i>Checklists</a>
<ul>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#verschilvragen"><i class="fa fa-check"></i>verschilvragen</a></li>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#verbandvragen"><i class="fa fa-check"></i>verbandvragen</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="lesson-4---answering-research-questions.html"><a href="lesson-4---answering-research-questions.html#overview-r-functions-1"><i class="fa fa-check"></i>Overview R functions</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Intro into R, Reproducible research and machine learning</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lesson-3---importing-data-tidy-data" class="section level1">
<h1>Lesson 3 - Importing data &amp; tidy data</h1>
<p><img src="images/03_01_tidy.jpg" width="50%" style="display: block; margin: auto;" /></p>
<div id="learning-objectives-3" class="section level2">
<h2>Learning objectives</h2>
<p>After this lesson:</p>
<ul>
<li>You can import data into the R environment</li>
<li>You know how to inspect your data</li>
<li>You can make your data “tidy”</li>
</ul>
</div>
<div id="importing-text-files" class="section level2">
<h2>Importing text files</h2>
<p>So far, we have worked with built-in datasets. In real life you will generate data yourself or you will obtain data from other researchers or public sources such as <a href="https://www.ncbi.nlm.nih.gov/">NCBI</a>.</p>
<p>To start working with your own datasets, data needs to be read by R and stored as R objects. We can use a variety of <code>read_function()</code> from the the <a href="https://www.tidyverse.org/">tidyverse</a> packages to import plain text datafiles as tibbles (sort of like a data table). These functions work the same. If you have mastered one you can use the other functions in a similar way:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb196-1"><a href="lesson-3---importing-data-tidy-data.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>()       <span class="do">## comma separated values</span></span>
<span id="cb196-2"><a href="lesson-3---importing-data-tidy-data.html#cb196-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv2</span>()      <span class="do">## semicolon separated values</span></span>
<span id="cb196-3"><a href="lesson-3---importing-data-tidy-data.html#cb196-3" aria-hidden="true" tabindex="-1"></a><span class="fu">read_tsv</span>()       <span class="do">## tab separated values</span></span>
<span id="cb196-4"><a href="lesson-3---importing-data-tidy-data.html#cb196-4" aria-hidden="true" tabindex="-1"></a><span class="fu">read_delim</span>()     <span class="do">## custom defined delimiter, for example: </span></span>
<span id="cb196-5"><a href="lesson-3---importing-data-tidy-data.html#cb196-5" aria-hidden="true" tabindex="-1"></a><span class="fu">read_delim</span>(<span class="st">&quot;voorbeeld.csv&quot;</span>, <span class="at">delim=</span><span class="st">&quot;&amp;&quot;</span>)</span>
<span id="cb196-6"><a href="lesson-3---importing-data-tidy-data.html#cb196-6" aria-hidden="true" tabindex="-1"></a><span class="fu">read_fwf</span>()       <span class="do">## fixed width fields</span></span>
<span id="cb196-7"><a href="lesson-3---importing-data-tidy-data.html#cb196-7" aria-hidden="true" tabindex="-1"></a><span class="fu">read_table</span>()     <span class="do">## white space separated </span></span></code></pre></div>
<div id="separators" class="section level3">
<h3>separators</h3>
<p>Before choosing the right <code>read_function()</code> you need to know how the values of your dataset are separated.</p>
<p>You can view files by clicking on them in the files tab (lower right corner of the screen).
<img src="images/01_3_Rstudio.jpg" width="80%" /></p>
<p><strong>Navigate to the folder data/lesson3.</strong></p>
<p><strong>try clicking on a few txt files and inspect what they look like.</strong></p>
<p><strong>click on heights.csv, select view</strong></p>
<p>Values of the heights.csv file are separated by comma’s. Even though the filename ends on csv (comma separated values) always inspect the contents of a datafile before loading it into R!</p>
<p>We can use the read_csv() function:</p>
<div id="example-19" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb197"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb197-1"><a href="lesson-3---importing-data-tidy-data.html#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb197-2"><a href="lesson-3---importing-data-tidy-data.html#cb197-2" aria-hidden="true" tabindex="-1"></a>heights <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/lesson3/heights.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 1192 Columns: 6
## ── Column specification ──────────────────────────────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (2): sex, race
## dbl (4): earn, height, ed, age
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>you can view the data by typing the object name in the console (or in a script and run that line):</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb199-1"><a href="lesson-3---importing-data-tidy-data.html#cb199-1" aria-hidden="true" tabindex="-1"></a>heights</span></code></pre></div>
<p>R assumes the decimal separator is a “point”. If your datafile has a comma as a decimal separator (most european datafiles) you have to tell the <code>read_function()</code> this!</p>
<p>We will use a datafile which is present in the server folder <strong>data/lesson3</strong> named <strong>heights3.txt</strong>. Inspect the datafile heights3.txt. As you can see,
the values are tab separated and the decimal separator is a comma.</p>
<p>We will first use the <code>read_tsv()</code> function with default settings:</p>
</div>
<div id="example-20" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb200"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb200-1"><a href="lesson-3---importing-data-tidy-data.html#cb200-1" aria-hidden="true" tabindex="-1"></a>heights_3 <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">&quot;data/lesson3/heights3.txt&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 1192 Columns: 6
## ── Column specification ──────────────────────────────────────────────────────────────────────────────────
## Delimiter: &quot;\t&quot;
## chr (2): sex, race
## dbl (3): earn, ed, age
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb202"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb202-1"><a href="lesson-3---importing-data-tidy-data.html#cb202-1" aria-hidden="true" tabindex="-1"></a>heights_3</span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 1,192 × 6
##     earn  height sex       ed   age race    
##    &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   
##  1 50000 7.44e14 male      16    45 white   
##  2 60000 6.55e14 female    16    58 white   
##  3 30000 6.36e14 female    16    29 white   
##  4 50000 6.31e14 female    16    91 other   
##  5 51000 6.34e14 female    17    39 white   
##  6  9000 6.44e14 female    15    26 white   
##  7 29000 6.17e14 female    12    49 white   
##  8 32000 7.27e14 male      17    46 white   
##  9  2000 7.20e14 male      15    21 hispanic
## 10 27000 7.22e14 male      12    26 white   
## # … with 1,182 more rows</code></pre>
<p>The values of variable height are not shown correctly:</p>
<ul>
<li>row1 original value = 74,4244387818035.</li>
<li>row1 converted value = 7.44e14</li>
</ul>
<p>We have to instruct <code>read_tsv()</code> that the comma acts a decimal separator by using the locale argument in combination with the <code>locale()</code> function:</p>
</div>
<div id="example-21" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb204"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb204-1"><a href="lesson-3---importing-data-tidy-data.html#cb204-1" aria-hidden="true" tabindex="-1"></a>heights_3 <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">&quot;data/lesson3/heights3.txt&quot;</span>, </span>
<span id="cb204-2"><a href="lesson-3---importing-data-tidy-data.html#cb204-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">locale =</span> <span class="fu">locale</span>(<span class="at">decimal_mark =</span> <span class="st">&quot;,&quot;</span>))</span></code></pre></div>
<pre><code>## Rows: 1192 Columns: 6
## ── Column specification ──────────────────────────────────────────────────────────────────────────────────
## Delimiter: &quot;\t&quot;
## chr (2): sex, race
## dbl (4): earn, height, ed, age
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb206"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb206-1"><a href="lesson-3---importing-data-tidy-data.html#cb206-1" aria-hidden="true" tabindex="-1"></a>heights_3</span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 1,192 × 6
##     earn height sex       ed   age race    
##    &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   
##  1 50000   74.4 male      16    45 white   
##  2 60000   65.5 female    16    58 white   
##  3 30000   63.6 female    16    29 white   
##  4 50000   63.1 female    16    91 other   
##  5 51000   63.4 female    17    39 white   
##  6  9000   64.4 female    15    26 white   
##  7 29000   61.7 female    12    49 white   
##  8 32000   72.7 male      17    46 white   
##  9  2000   72.0 male      15    21 hispanic
## 10 27000   72.2 male      12    26 white   
## # … with 1,182 more rows</code></pre>
<p>Now the values of the height variable are read in correctly.</p>
</div>
</div>
<div id="extracting-numbers" class="section level3">
<h3>extracting numbers</h3>
<p>The <code>read_function()</code> (in this case <code>read_tsv</code>) guesses the datatype of each column and tries to read and convert the data in the right format. A problem you might encounter are numbers surrounded by non-numerical characters such as % of currency characters. For example $1,23 or 31%. To extract only the number we can use two options:</p>
<ul>
<li>The function <code>parse_number()</code></li>
<li>The argument <strong>col_types</strong> in combination with the <code>function cols()</code>.</li>
</ul>
<p>To demonstrate number extraction out of a character value we will use file <strong>dollar.txt</strong> in the server folder <strong>data/lesson3</strong></p>
<div id="example-22" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb208"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb208-1"><a href="lesson-3---importing-data-tidy-data.html#cb208-1" aria-hidden="true" tabindex="-1"></a>dollar <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">&quot;data/lesson3/dollar.txt&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 5 Columns: 2
## ── Column specification ──────────────────────────────────────────────────────────────────────────────────
## Delimiter: &quot;\t&quot;
## chr (1): amount
## dbl (1): person
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb210"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb210-1"><a href="lesson-3---importing-data-tidy-data.html#cb210-1" aria-hidden="true" tabindex="-1"></a>dollar                                        <span class="co"># variable amount is of data type character (chr)</span></span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 5 × 2
##   person amount
##    &lt;dbl&gt; &lt;chr&gt; 
## 1      1 $100  
## 2      2 $200  
## 3      3 $300  
## 4      4 $400  
## 5      5 $500</code></pre>
<div class="sourceCode" id="cb212"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb212-1"><a href="lesson-3---importing-data-tidy-data.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">parse_number</span>(dollar<span class="sc">$</span>amount[<span class="dv">1</span>])            <span class="co"># parse_number() extracts numeric value out of $100 </span></span></code></pre></div>
<pre class="Rout"><code>## [1] 100</code></pre>
<div class="sourceCode" id="cb214"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb214-1"><a href="lesson-3---importing-data-tidy-data.html#cb214-1" aria-hidden="true" tabindex="-1"></a>dollar<span class="sc">$</span>amount <span class="ot">&lt;-</span> <span class="fu">parse_number</span>(dollar<span class="sc">$</span>amount)  <span class="co"># replace all character strings for numeric values of the variable &quot;amount&quot;</span></span>
<span id="cb214-2"><a href="lesson-3---importing-data-tidy-data.html#cb214-2" aria-hidden="true" tabindex="-1"></a>dollar                                        <span class="co"># check that numeric values are extracted and returned </span></span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 5 × 2
##   person amount
##    &lt;dbl&gt;  &lt;dbl&gt;
## 1      1    100
## 2      2    200
## 3      3    300
## 4      4    400
## 5      5    500</code></pre>
<p>The alternative solution is to use the <code>read_function()</code> and change the <strong>col_types</strong> argument. The <strong>col_types</strong> argument is used in combination with the <code>col()</code> and the <code>col_number()</code> function (of which the latter is equivalent to the <code>parse_number()</code> function). The <code>col()</code> function is used to select all variables and the <code>col_number()</code> function is used to select a specific variable (in this case “amount”) to extract the number out of a character vector.</p>
</div>
<div id="example-23" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb216"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb216-1"><a href="lesson-3---importing-data-tidy-data.html#cb216-1" aria-hidden="true" tabindex="-1"></a>dollar_2 <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">&quot;data/lesson3/dollar.txt&quot;</span>,  <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">amount =</span> <span class="fu">col_number</span>()))</span>
<span id="cb216-2"><a href="lesson-3---importing-data-tidy-data.html#cb216-2" aria-hidden="true" tabindex="-1"></a>dollar_2  <span class="co"># numeric values are extracted and returned . Data type is double (dbl)</span></span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 5 × 2
##   person amount
##    &lt;dbl&gt;  &lt;dbl&gt;
## 1      1    100
## 2      2    200
## 3      3    300
## 4      4    400
## 5      5    500</code></pre>
</div>
<div id="exercise-3" class="section level5 unnumbered question">
<h5>Exercise 3</h5>
<p>Import data datafile heights4.txt in server folder data/lesson3 into R.</p>
</div>
<details>
<summary>
Click for the answer
</summary>
<div class="sourceCode" id="cb218"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb218-1"><a href="lesson-3---importing-data-tidy-data.html#cb218-1" aria-hidden="true" tabindex="-1"></a>heights4 <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;data/lesson3/heights4.txt&quot;</span>, <span class="at">delim=</span><span class="st">&quot;@&quot;</span>, <span class="at">locale =</span> <span class="fu">locale</span>(<span class="at">decimal_mark =</span> <span class="st">&quot;,&quot;</span>))</span></code></pre></div>
<pre><code>## Rows: 1192 Columns: 6
## ── Column specification ──────────────────────────────────────────────────────────────────────────────────
## Delimiter: &quot;@&quot;
## chr (2): sex, race
## dbl (4): earn, height, ed, age
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb220"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb220-1"><a href="lesson-3---importing-data-tidy-data.html#cb220-1" aria-hidden="true" tabindex="-1"></a>heights4</span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 1,192 × 6
##     earn height sex       ed   age race    
##    &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   
##  1 50000   74.4 male      16    45 white   
##  2 60000   65.5 female    16    58 white   
##  3 30000   63.6 female    16    29 white   
##  4 50000   63.1 female    16    91 other   
##  5 51000   63.4 female    17    39 white   
##  6  9000   64.4 female    15    26 white   
##  7 29000   61.7 female    12    49 white   
##  8 32000   72.7 male      17    46 white   
##  9  2000   72.0 male      15    21 hispanic
## 10 27000   72.2 male      12    26 white   
## # … with 1,182 more rows</code></pre>
</details>
<div id="exercise-3-1" class="section level5 unnumbered question">
<h5>Exercise 3</h5>
<p>Import data datafile salary.csv in server folder data/lesson3 into R.</p>
<p>Convert character vectors with numbers to numeric values only. The thousand separator is a dot !</p>
</div>
<details>
<summary>
Click for the answer
</summary>
<div class="sourceCode" id="cb222"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb222-1"><a href="lesson-3---importing-data-tidy-data.html#cb222-1" aria-hidden="true" tabindex="-1"></a>salary <span class="ot">&lt;-</span> <span class="fu">read_csv2</span>(<span class="st">&quot;data/lesson3/salary.csv&quot;</span>, </span>
<span id="cb222-2"><a href="lesson-3---importing-data-tidy-data.html#cb222-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">Salary_2018 =</span> <span class="fu">col_number</span>(), </span>
<span id="cb222-3"><a href="lesson-3---importing-data-tidy-data.html#cb222-3" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">Increase_in_salary_2018 =</span> <span class="fu">col_number</span>()))</span></code></pre></div>
<pre><code>## ℹ Using &quot;&#39;,&#39;&quot; as decimal and &quot;&#39;.&#39;&quot; as grouping mark. Use `read_delim()` for more control.</code></pre>
<div class="sourceCode" id="cb224"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb224-1"><a href="lesson-3---importing-data-tidy-data.html#cb224-1" aria-hidden="true" tabindex="-1"></a>salary</span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 10 × 4
##    Employee Group Salary_2018 Increase_in_salary_2018
##       &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;                   &lt;dbl&gt;
##  1        1     1        2000                  0.02  
##  2        2     1        2000                  0.023 
##  3        3     1        2000                  0.016 
##  4        4     1        2000                  0.032 
##  5        5     1        2000                  0.0194
##  6        6     2        3000                  0.032 
##  7        7     2        3000                  0.016 
##  8        8     2        3000                  0.0343
##  9        9     2        3000                  0.024 
## 10       10     2        3000                  0.011</code></pre>
</details>
</div>
</div>
<div id="setting-variable-column-names" class="section level2">
<h2>Setting variable (column) names</h2>
<p>By default <code>read_function()</code> uses the first line of a dataset as variable names (column names).</p>
<p>There are two situations where we have to change the behaviour of the <code>read_function()</code></p>
<div class="tip">
<p>If a dataset doesn’t contain variable names (=column names) use the option col_names = FALSE.</p>
</div>
<p>The first line of the dataset will be ignored as variable names. The columns will be labelled automatically from X1 to Xn. If you want to manually add variable names you can provide a vector with the variable names tot the col_names option: col_names = c(“variable_name1”, “variable_name2”, “variable_name3”)</p>
<p>Download dataset <a href="downloaddata/heights1.csv">heights1.csv</a> and move the file to the server folder data/lesson3. To move files between the server and your computer:</p>
<p><strong>Go to the server, select the folder you want to upload something to.</strong></p>
<p><strong>click on Upload</strong></p>
<p><img src="images/03_3_uploadles.PNG" width="60%" /></p>
<p><strong>In the upload menu, click Choose File and select heights.csv where you just downloaded it.</strong></p>
<p><strong>inspect heights.csv</strong></p>
<p>This file lacks variable names:</p>
<div id="example-24" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb226"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb226-1"><a href="lesson-3---importing-data-tidy-data.html#cb226-1" aria-hidden="true" tabindex="-1"></a>heights_1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/lesson3/heights1.csv&quot;</span>, <span class="at">col_names =</span> <span class="cn">FALSE</span>)  <span class="co"># first line will not be used as variable names </span></span></code></pre></div>
<div class="sourceCode" id="cb227"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb227-1"><a href="lesson-3---importing-data-tidy-data.html#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(heights_1)</span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 6 × 6
##      X1    X2 X3        X4    X5 X6   
##   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
## 1 50000  74.4 male      16    45 white
## 2 60000  65.5 female    16    58 white
## 3 30000  63.6 female    16    29 white
## 4 50000  63.1 female    16    91 other
## 5 51000  63.4 female    17    39 white
## 6  9000  64.4 female    15    26 white</code></pre>
<div class="sourceCode" id="cb229"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb229-1"><a href="lesson-3---importing-data-tidy-data.html#cb229-1" aria-hidden="true" tabindex="-1"></a>heights_1_1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/lesson3/heights1.csv&quot;</span>,  <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">&quot;name1&quot;</span>, <span class="st">&quot;name2&quot;</span>, <span class="st">&quot;name3&quot;</span>, <span class="st">&quot;name4&quot;</span>, <span class="st">&quot;name5&quot;</span>, <span class="st">&quot;name6&quot;</span>))  </span>
<span id="cb229-2"><a href="lesson-3---importing-data-tidy-data.html#cb229-2" aria-hidden="true" tabindex="-1"></a><span class="co"># added custom variable names by providing a vector containing the names of the variables</span></span>
<span id="cb229-3"><a href="lesson-3---importing-data-tidy-data.html#cb229-3" aria-hidden="true" tabindex="-1"></a><span class="co"># in this case: &quot;name1, name2  name3 etc&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb230"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb230-1"><a href="lesson-3---importing-data-tidy-data.html#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(heights_1_1)</span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 6 × 6
##   name1 name2 name3  name4 name5 name6
##   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
## 1 50000  74.4 male      16    45 white
## 2 60000  65.5 female    16    58 white
## 3 30000  63.6 female    16    29 white
## 4 50000  63.1 female    16    91 other
## 5 51000  63.4 female    17    39 white
## 6  9000  64.4 female    15    26 white</code></pre>
<p>Variables names can always be modified by using:</p>
<ul>
<li>The function <code>colnames()</code></li>
<li>The function <code>rename()</code></li>
</ul>
</div>
<div id="example-25" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb232"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb232-1"><a href="lesson-3---importing-data-tidy-data.html#cb232-1" aria-hidden="true" tabindex="-1"></a>heights_1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/lesson3/heights1.csv&quot;</span>, <span class="at">col_names =</span> <span class="cn">FALSE</span>) </span></code></pre></div>
<div class="sourceCode" id="cb233"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb233-1"><a href="lesson-3---importing-data-tidy-data.html#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(heights_1)<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;name1&quot;</span>, <span class="st">&quot;name2&quot;</span>, <span class="st">&quot;name3&quot;</span>, <span class="st">&quot;name4&quot;</span>, <span class="st">&quot;name5&quot;</span>, <span class="st">&quot;name6&quot;</span>)   <span class="co"># change all column names </span></span>
<span id="cb233-2"><a href="lesson-3---importing-data-tidy-data.html#cb233-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(heights_1)[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">&quot;new_name3&quot;</span>   <span class="co"># change the name of a specified column using an index</span></span>
<span id="cb233-3"><a href="lesson-3---importing-data-tidy-data.html#cb233-3" aria-hidden="true" tabindex="-1"></a>heights_1_1 <span class="ot">&lt;-</span><span class="fu">rename</span>(heights_1_1,  <span class="at">new_name4 =</span> name4) <span class="co"># change the name of a specified column using rename() </span></span></code></pre></div>
<div class="tip">
<p><strong>(2) if variable names are present but not at the first line use te options skip=N or comment = “#”</strong></p>
</div>
<p>Download dataset <a href="downloaddata/heights2.txt">heights2.txt</a> and move the file to the server folder data/lesson3. This file contains variable names but not at the first row. Note that the values are separated by tabs!</p>
<p><strong>First we have to inspect the datafile: click on the file.</strong></p>
<p>The first two lines are comments starting with the # sign. The variable names are present at row3. To read in the file we will use read_tsv()</p>
</div>
<div id="example-26" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb234"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb234-1"><a href="lesson-3---importing-data-tidy-data.html#cb234-1" aria-hidden="true" tabindex="-1"></a>heights_2<span class="ot">&lt;-</span><span class="fu">read_tsv</span>(<span class="st">&quot;data/lesson3/heights2.txt&quot;</span>, <span class="at">skip =</span> <span class="dv">2</span>) <span class="co"># first two rows are not imported in object heights_2</span></span></code></pre></div>
<div class="sourceCode" id="cb235"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb235-1"><a href="lesson-3---importing-data-tidy-data.html#cb235-1" aria-hidden="true" tabindex="-1"></a>heights_2</span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 1,192 × 6
##     earn height sex       ed   age race    
##    &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   
##  1 50000   74.4 male      16    45 white   
##  2 60000   65.5 female    16    58 white   
##  3 30000   63.6 female    16    29 white   
##  4 50000   63.1 female    16    91 other   
##  5 51000   63.4 female    17    39 white   
##  6  9000   64.4 female    15    26 white   
##  7 29000   61.7 female    12    49 white   
##  8 32000   72.7 male      17    46 white   
##  9  2000   72.0 male      15    21 hispanic
## 10 27000   72.2 male      12    26 white   
## # … with 1,182 more rows</code></pre>
<p>Alternatively we can use the comment = “#” option</p>
</div>
<div id="example-27" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb237"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb237-1"><a href="lesson-3---importing-data-tidy-data.html#cb237-1" aria-hidden="true" tabindex="-1"></a>heights_2<span class="ot">&lt;-</span><span class="fu">read_tsv</span>(<span class="st">&quot;data/lesson3/heights2.txt&quot;</span>, <span class="at">comment =</span> <span class="st">&quot;#&quot;</span>)      <span class="do">## lines starting with a # sign are ignored for read in</span></span></code></pre></div>
<div class="sourceCode" id="cb238"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb238-1"><a href="lesson-3---importing-data-tidy-data.html#cb238-1" aria-hidden="true" tabindex="-1"></a>heights_2</span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 1,192 × 6
##     earn height sex       ed   age race    
##    &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   
##  1 50000   74.4 male      16    45 white   
##  2 60000   65.5 female    16    58 white   
##  3 30000   63.6 female    16    29 white   
##  4 50000   63.1 female    16    91 other   
##  5 51000   63.4 female    17    39 white   
##  6  9000   64.4 female    15    26 white   
##  7 29000   61.7 female    12    49 white   
##  8 32000   72.7 male      17    46 white   
##  9  2000   72.0 male      15    21 hispanic
## 10 27000   72.2 male      12    26 white   
## # … with 1,182 more rows</code></pre>
</div>
<div id="exercise-3-2" class="section level5 unnumbered question">
<h5>Exercise 3</h5>
<p>Import datafile iris in server folder data/lesson3 into R.</p>
<p>This file lacks column names and starts with comments. Import the datafile without the comment lines and add columns names “Sepal.Length”, “Sepal.Width”, “Petal.Length”, “Petal.Width”, “Species” to the imported dataset.</p>
</div>
<details>
<summary>
Click for the answer
</summary>
<div class="sourceCode" id="cb240"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb240-1"><a href="lesson-3---importing-data-tidy-data.html#cb240-1" aria-hidden="true" tabindex="-1"></a>iris_flower<span class="ot">&lt;-</span><span class="fu">read_tsv</span>(<span class="st">&quot;data/lesson3/iris&quot;</span>,</span>
<span id="cb240-2"><a href="lesson-3---importing-data-tidy-data.html#cb240-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">comment =</span> <span class="st">&quot;#&quot;</span>,</span>
<span id="cb240-3"><a href="lesson-3---importing-data-tidy-data.html#cb240-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">&quot;Sepal.Length&quot;</span>, <span class="st">&quot;Sepal.Width&quot;</span>, <span class="st">&quot;Petal.Length&quot;</span>, <span class="st">&quot;Petal.Width&quot;</span>, <span class="st">&quot;Species&quot;</span>))</span></code></pre></div>
<pre><code>## Rows: 100 Columns: 5
## ── Column specification ──────────────────────────────────────────────────────────────────────────────────
## Delimiter: &quot;\t&quot;
## chr (1): Species
## dbl (4): Sepal.Length, Sepal.Width, Petal.Length, Petal.Width
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</details>
</div>
<div id="importing-excel-files" class="section level2">
<h2>Importing Excel files</h2>
<p>To import Excel files directly into R we can use <code>read_excel()</code> function of the readxl package which is part of tidyverse. When Using <code>read_excel()</code> Excel datasheets will be converted to a tibble. <code>read_excel()</code> reads both xls and xlsx files and detects the format from the extension.</p>
<p>More information about the readxl package can be found at <a href="https://readxl.tidyverse.org/">tidyverse.org</a></p>
<p>NOTE: Sometimes it’s more convenient to organise your data in Excel and copy the values as plain text in a text editor such as notepad. Subsequently, import the file using the appropiate read_function() described on the previous page.</p>
<div id="example-28" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb242"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb242-1"><a href="lesson-3---importing-data-tidy-data.html#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb242-2"><a href="lesson-3---importing-data-tidy-data.html#cb242-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)                               <span class="co"># you have to explicity load the readxl library</span></span>
<span id="cb242-3"><a href="lesson-3---importing-data-tidy-data.html#cb242-3" aria-hidden="true" tabindex="-1"></a><span class="fu">excel_sheets</span>(<span class="st">&quot;data/lesson3/datasets.xlsx&quot;</span>)    <span class="co"># inspect how many datasheets are present in the excel file</span></span></code></pre></div>
<pre class="Rout"><code>## [1] &quot;iris&quot;     &quot;mtcars&quot;   &quot;chickwts&quot; &quot;quakes&quot;   &quot;iris_2&quot;   &quot;quakes_1&quot;</code></pre>
<div class="sourceCode" id="cb244"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb244-1"><a href="lesson-3---importing-data-tidy-data.html#cb244-1" aria-hidden="true" tabindex="-1"></a>datasets_iris<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;data/lesson3/datasets.xlsx&quot;</span>)    <span class="co"># default behaviour is to import the first datasheet. </span></span></code></pre></div>
<p>Excel files can have multiple datasheets. To specifically select a datasheet use the sheet = “sheetname” or sheet = number option</p>
</div>
<div id="example-29" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb245"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb245-1"><a href="lesson-3---importing-data-tidy-data.html#cb245-1" aria-hidden="true" tabindex="-1"></a>datasets_mtcars<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;data/lesson3/datasets.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;mtcars&quot;</span>)  <span class="co"># select Excel datasheet named &quot;mtcars&quot;</span></span>
<span id="cb245-2"><a href="lesson-3---importing-data-tidy-data.html#cb245-2" aria-hidden="true" tabindex="-1"></a>datasets_quakes<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;data/lesson3/datasets.xlsx&quot;</span>,  <span class="at">sheet =</span> <span class="dv">4</span>)        <span class="co"># select the 4th Excel datasheet (= &quot;quakes&quot;)</span></span></code></pre></div>
<p>Datafiles in Excel might not always contain column names (=variable names). If the first row doesn’t contain column names we have to tell read_excel() to treat the first row as values and not as variable names by using the col_names=FALSE option.</p>
</div>
<div id="example-30" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb246"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb246-1"><a href="lesson-3---importing-data-tidy-data.html#cb246-1" aria-hidden="true" tabindex="-1"></a>datasets_iris_2<span class="ot">&lt;-</span><span class="fu">read_excel</span>(<span class="st">&quot;data/lesson3/datasets.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="dv">5</span>, <span class="at">col_names =</span> <span class="cn">FALSE</span>) </span></code></pre></div>
<pre><code>## New names:
## • `` -&gt; `...1`
## • `` -&gt; `...2`
## • `` -&gt; `...3`
## • `` -&gt; `...4`
## • `` -&gt; `...5`</code></pre>
<p>If you want to rename the column names you can use the rename() or the colnames() functions (see <a href="lesson-3---importing-data-tidy-data.html#setting-variable-column-names">Setting variable (column) names</a>)</p>
</div>
<div id="exercise-3-3" class="section level5 unnumbered question">
<h5>Exercise 3</h5>
<p>Import sheet “quakes_1” from datafile datasets.xlsx in server folder data/lesson3 into R. Column names are not listed in datasets.xlsx. Import the datafile and add columns names “lat” “long” “depth” “mag” “stations” to the imported data.</p>
</div>
<details>
<summary>
Click for the answer
</summary>
<div class="sourceCode" id="cb248"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb248-1"><a href="lesson-3---importing-data-tidy-data.html#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb248-2"><a href="lesson-3---importing-data-tidy-data.html#cb248-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read_excel</span>(<span class="st">&quot;data/lesson3/datasets.xlsx&quot;</span>,</span>
<span id="cb248-3"><a href="lesson-3---importing-data-tidy-data.html#cb248-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">sheet =</span> <span class="st">&quot;quakes_1&quot;</span>,</span>
<span id="cb248-4"><a href="lesson-3---importing-data-tidy-data.html#cb248-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">&quot;lat&quot;</span>, <span class="st">&quot;long&quot;</span>, <span class="st">&quot;depth&quot;</span>, <span class="st">&quot;mag&quot;</span>, <span class="st">&quot;stations&quot;</span>))</span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 1,000 × 5
##      lat  long depth   mag stations
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
##  1 -20.4  182.   562   4.8       41
##  2 -20.6  181.   650   4.2       15
##  3 -26    184.    42   5.4       43
##  4 -18.0  182.   626   4.1       19
##  5 -20.4  182.   649   4         11
##  6 -19.7  184.   195   4         12
##  7 -11.7  166.    82   4.8       43
##  8 -28.1  182.   194   4.4       15
##  9 -28.7  182.   211   4.7       35
## 10 -17.5  180.   622   4.3       19
## # … with 990 more rows</code></pre>
</details>
</div>
<div id="saving-and-importing-r_objects" class="section level2">
<h2>Saving and importing R_Objects</h2>
<ul>
<li>To import data in plain text format we use the function read_function()</li>
<li>To import data in Excel format we use the function read_excel()</li>
</ul>
<p>It is also possible to save an R object directly to the server and to read the file from the server in the R environment:</p>
<p>To save an R object to the server use the function <code>saveRDS()</code></p>
<p>To import data that is stored as an R object we make use of the function <code>readRDS()</code></p>
<div id="example-31" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb250"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb250-1"><a href="lesson-3---importing-data-tidy-data.html#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dslabs)                              <span class="co"># we will use a dataset called olive from the dslabs package                       </span></span>
<span id="cb250-2"><a href="lesson-3---importing-data-tidy-data.html#cb250-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(olive)</span>
<span id="cb250-3"><a href="lesson-3---importing-data-tidy-data.html#cb250-3" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(olive, <span class="st">&quot;data/lesson3/olive.rds&quot;</span>)     <span class="co"># object olive is saved as file olive.rds in server folder data/lesson3   </span></span></code></pre></div>
<p>To import this R object from the server into RStudio use <code>readRDS()</code>. This function takes 1 argument. Assign the R object from the server to a new object name in Rstudio!</p>
</div>
<div id="example-32" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb251"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb251-1"><a href="lesson-3---importing-data-tidy-data.html#cb251-1" aria-hidden="true" tabindex="-1"></a>olive_from_server <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/lesson3/olive.rds&quot;</span>)                    <span class="do">## the path to the file must be quoted</span></span></code></pre></div>
</div>
</div>
<div id="inspecting-your-data" class="section level2">
<h2>Inspecting your data</h2>
<p>Data wrangling: the process of transforming and mapping data from a “raw” data format into another format with the intent of making it more appropriate and valuable for a variety of downstream purposes such as analytics and visualization ([wikipedia] (<a href="https://en.wikipedia.org/wiki/Data_wrangling" class="uri">https://en.wikipedia.org/wiki/Data_wrangling</a>))</p>
<p>The first step in data wrangling is to inspect the structure of the dataset. We’ve already seen some functions to inspect the data. Important questions are:</p>
<ul>
<li>What is the datastructure?</li>
<li>How many variables does the dataset contain?</li>
<li>What are the names of the variables?</li>
<li>What are the data types of the variables?</li>
<li>What are possible categories (factors)?</li>
<li>What are the levels of the categories?</li>
<li>Are there NA values?</li>
<li>Is the data <strong>tidy</strong>?</li>
</ul>
<p>Let’s recall some previously used functions to inspect the data. We will use data from the “dslabs” package.</p>
<div id="example-33" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb252"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb252-1"><a href="lesson-3---importing-data-tidy-data.html#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb252-2"><a href="lesson-3---importing-data-tidy-data.html#cb252-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dslabs)</span></code></pre></div>
<div class="sourceCode" id="cb253"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb253-1"><a href="lesson-3---importing-data-tidy-data.html#cb253-1" aria-hidden="true" tabindex="-1"></a>?divorce_margarine      <span class="co"># information about the divorce_margarine dataset from the &quot;dslabs&quot; package</span></span></code></pre></div>
<div class="sourceCode" id="cb254"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb254-1"><a href="lesson-3---importing-data-tidy-data.html#cb254-1" aria-hidden="true" tabindex="-1"></a>divorce_margarine_tbl <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(divorce_margarine)      <span class="co"># converting dataframe to tibble                    </span></span>
<span id="cb254-2"><a href="lesson-3---importing-data-tidy-data.html#cb254-2" aria-hidden="true" tabindex="-1"></a>divorce_margarine_tbl </span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 10 × 3
##    divorce_rate_maine margarine_consumption_per_capita  year
##                 &lt;dbl&gt;                            &lt;dbl&gt; &lt;int&gt;
##  1                5                                8.2  2000
##  2                4.7                              7    2001
##  3                4.6                              6.5  2002
##  4                4.4                              5.3  2003
##  5                4.3                              5.2  2004
##  6                4.1                              4    2005
##  7                4.2                              4.6  2006
##  8                4.2                              4.5  2007
##  9                4.2                              4.2  2008
## 10                4.1                              3.7  2009</code></pre>
<p>Let’s inspect another dataset from the dslabs package: gapminder</p>
</div>
<div id="example-34" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb256"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb256-1"><a href="lesson-3---importing-data-tidy-data.html#cb256-1" aria-hidden="true" tabindex="-1"></a>?gapminder                                       <span class="co"># information about the &quot;gapminder&quot; dataset</span></span></code></pre></div>
<div class="sourceCode" id="cb257"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb257-1"><a href="lesson-3---importing-data-tidy-data.html#cb257-1" aria-hidden="true" tabindex="-1"></a>gapminder_tbl <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(gapminder)            <span class="co"># converting dataframe to tibble</span></span>
<span id="cb257-2"><a href="lesson-3---importing-data-tidy-data.html#cb257-2" aria-hidden="true" tabindex="-1"></a>gapminder_tbl</span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 10,545 × 9
##    country            year infant_mortality life_expectancy fertility population      gdp continent region
##    &lt;fct&gt;             &lt;int&gt;            &lt;dbl&gt;           &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt; 
##  1 Albania            1960            115.             62.9      6.19    1636054 NA       Europe    South…
##  2 Algeria            1960            148.             47.5      7.65   11124892  1.38e10 Africa    North…
##  3 Angola             1960            208              36.0      7.32    5270844 NA       Africa    Middl…
##  4 Antigua and Barb…  1960             NA              63.0      4.43      54681 NA       Americas  Carib…
##  5 Argentina          1960             59.9            65.4      3.11   20619075  1.08e11 Americas  South…
##  6 Armenia            1960             NA              66.9      4.55    1867396 NA       Asia      Weste…
##  7 Aruba              1960             NA              65.7      4.82      54208 NA       Americas  Carib…
##  8 Australia          1960             20.3            70.9      3.45   10292328  9.67e10 Oceania   Austr…
##  9 Austria            1960             37.3            68.8      2.7     7065525  5.24e10 Europe    Weste…
## 10 Azerbaijan         1960             NA              61.3      5.57    3897889 NA       Asia      Weste…
## # … with 10,535 more rows</code></pre>
<div class="sourceCode" id="cb259"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb259-1"><a href="lesson-3---importing-data-tidy-data.html#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(gapminder_tbl<span class="sc">$</span>continent)                <span class="co"># categories in the continent variable</span></span></code></pre></div>
<pre class="Rout"><code>## [1] &quot;Africa&quot;   &quot;Americas&quot; &quot;Asia&quot;     &quot;Europe&quot;   &quot;Oceania&quot;</code></pre>
<div class="sourceCode" id="cb261"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb261-1"><a href="lesson-3---importing-data-tidy-data.html#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(gapminder_tbl<span class="sc">$</span>infant_mortality))   <span class="co"># count the missing (NA) values</span></span></code></pre></div>
<pre class="Rout"><code>## [1] 1453</code></pre>
<p>The last question of the inspection list is:</p>
<p>Is the data <strong>tidy</strong>?</p>
<p>Before we can answer this question we have to know what tidy data is.</p>
<hr />
</div>
</div>
<div id="what-is-tidy-data" class="section level2">
<h2>What is tidy data?</h2>
<p>Tidy data is a way of organising your data in a neat and structured way. If you make your data tidy, it is ensured that it is compatible with data analysis tools from the <a href="https://www.tidyverse.org/">tidyverse</a> package. A detailed explanation can be found in <a href="https://r4ds.had.co.nz/tidy-data.html">chapter12</a> in the e-book R for Data Science</p>
<p>However, it is important to note that data does not always need to be tidy. Other R packages require different data organisation formats!</p>
<p>So what is tidy data:</p>
<ol style="list-style-type: decimal">
<li>Each variable must have its own column.<br />
</li>
<li>Each observation must have its own row.</li>
<li>Each value must have its own cell.</li>
</ol>
<p><em>Table1: Example of tidy data</em></p>
<table>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">year</th>
<th align="left">population</th>
<th align="left">birth rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">mali</td>
<td align="left">2001</td>
<td align="left">10.000.000</td>
<td align="left">6.88</td>
</tr>
<tr class="even">
<td align="left">mali</td>
<td align="left">2010</td>
<td align="left">15.000.000</td>
<td align="left">6.06</td>
</tr>
<tr class="odd">
<td align="left">sweden</td>
<td align="left">2001</td>
<td align="left">9.000.000</td>
<td align="left">1.57</td>
</tr>
<tr class="even">
<td align="left">sweden</td>
<td align="left">2010</td>
<td align="left">10.000.000</td>
<td align="left">1.85</td>
</tr>
</tbody>
</table>
<p>Each variable must have its own column.</p>
<p><img src="images/03_4_tidy1.jpg" width="60%" /></p>
<p>Each observation must have its own row.</p>
<p><img src="images/03_5_tidy2.jpg" width="60%" /></p>
<p>Each value must have its own cell.</p>
<p><img src="images/03_6_tidy3.jpg" width="60%" /></p>
<p>So the following table would by untidy, as there are multiple observations per row:</p>
<p><em>Table2: Example of untidy data</em></p>
<table>
<thead>
<tr class="header">
<th align="left">student</th>
<th align="left">EDCC</th>
<th align="left">molbio</th>
<th align="left">immunologie</th>
<th align="left">BID</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Pietje</td>
<td align="left">7.5</td>
<td align="left">6</td>
<td align="left">8.2</td>
<td align="left">8</td>
</tr>
<tr class="even">
<td align="left">Marietje</td>
<td align="left">8</td>
<td align="left">7.9</td>
<td align="left">5</td>
<td align="left">9</td>
</tr>
</tbody>
</table>
<p>This would be the tidy version:</p>
<p><em>Table3: Example of untidy data made tidy</em></p>
<table>
<thead>
<tr class="header">
<th align="left">student</th>
<th align="left">course</th>
<th align="left">grade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Pietje</td>
<td align="left">EDCC</td>
<td align="left">7.5</td>
</tr>
<tr class="even">
<td align="left">Pietje</td>
<td align="left">molbio</td>
<td align="left">6</td>
</tr>
<tr class="odd">
<td align="left">Pietje</td>
<td align="left">immunologie</td>
<td align="left">8.2</td>
</tr>
<tr class="even">
<td align="left">Pietje</td>
<td align="left">BID</td>
<td align="left">8</td>
</tr>
<tr class="odd">
<td align="left">Marietje</td>
<td align="left">EDCC</td>
<td align="left">8</td>
</tr>
<tr class="even">
<td align="left">Marietje</td>
<td align="left">molbio</td>
<td align="left">7.9</td>
</tr>
<tr class="odd">
<td align="left">Marietje</td>
<td align="left">immunologie</td>
<td align="left">5</td>
</tr>
<tr class="even">
<td align="left">Marietje</td>
<td align="left">BID</td>
<td align="left">9</td>
</tr>
</tbody>
</table>
<div id="onderzoektidyvraag" class="section level5 question">
<h5>Exercise 3 {-}</h5>
<p>The package tidyverse contains the built-in datasets:</p>
<ul>
<li>table1</li>
<li>table2</li>
<li>table3</li>
<li>table4a</li>
<li>table4b</li>
</ul>
<p>Write code to inspect the data and argue if the tables are tidy</p>
</div>
<details>
<summary>
Click for the answer
</summary>
<p>To inspect for instance <strong>table1</strong>, just write <code>table1</code> in the console window.</p>
<p>There are three rules to make a dataset tidy:</p>
<ul>
<li>Each variable must have its own column.</li>
<li>Each observation must have its own row.</li>
<li>Each value must have its own cell.</li>
</ul>
<p><strong>table1</strong>: tidy</p>
<p><strong>table2</strong>: non-tidy, violation of rule2. An observation is a country in a year, but each observation is spread across two rows.</p>
<p><strong>table3</strong>: non-tidy, violation of rule3. The “rate” column contains both cases and population variables</p>
<strong>table4a/b</strong>: non-tidy, violation of rule 1 and 2. The column names “1999” and “2000” represent values of the year variable, and each row represents two observations, not one.
</details>
</div>
<div id="making-your-data-tidy-gathering" class="section level2">
<h2>Making your data tidy: gathering</h2>
<p>In <a href="lesson-3---importing-data-tidy-data.html#onderzoektidyvraag">this exercise</a> we noted that table4a is not tidy: the column names ‘1999’ and ‘2000’ represent values of the year variable, and each row represents two observations, not one.</p>
<p><img src="images/03_7_nontidy_table4a.jpg" width="80%" /></p>
<p>To merge columns ‘1999’ and ‘2000’ into 1 column we can use the tidyverse function <code>pivot_longer()</code>:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb263-1"><a href="lesson-3---importing-data-tidy-data.html#cb263-1" aria-hidden="true" tabindex="-1"></a>table4a_tidy <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(<span class="at">data =</span> table4a, <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&#39;1999&#39;</span>, <span class="st">&#39;2000&#39;</span>),  </span>
<span id="cb263-2"><a href="lesson-3---importing-data-tidy-data.html#cb263-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>,  <span class="at">values_to =</span> <span class="st">&quot;cases&quot;</span>)</span>
<span id="cb263-3"><a href="lesson-3---importing-data-tidy-data.html#cb263-3" aria-hidden="true" tabindex="-1"></a>table4a_tidy</span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 6 × 3
##   country     year   cases
##   &lt;chr&gt;       &lt;chr&gt;  &lt;int&gt;
## 1 Afghanistan 1999     745
## 2 Afghanistan 2000    2666
## 3 Brazil      1999   37737
## 4 Brazil      2000   80488
## 5 China       1999  212258
## 6 China       2000  213766</code></pre>
<p>Alternatively we can use the pipe to redirect data to the <code>pivot_longer()</code> function:</p>
<div id="example-35" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb265"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb265-1"><a href="lesson-3---importing-data-tidy-data.html#cb265-1" aria-hidden="true" tabindex="-1"></a>table4a_tidy <span class="ot">&lt;-</span> table4a <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&#39;1999&#39;</span>, <span class="st">&#39;2000&#39;</span>),  </span>
<span id="cb265-2"><a href="lesson-3---importing-data-tidy-data.html#cb265-2" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>,  <span class="at">values_to =</span> <span class="st">&quot;cases&quot;</span>)</span></code></pre></div>
<div class="rstudio-tip">
<p>Important: from now on we will often use the pipe %&gt;% to redirect data into an R function:</p>
</div>
<p>The %&gt;% pipe symbol can be read as “followed by”. The %&gt;% symbol directs the <strong>OUTPUT</strong> of one R function as <strong>INPUT</strong> to the following R function.</p>
<p>dataset %&gt;% function() %&gt;% function() .. and so on</p>
<p>This way the steps of data manipulation are easier to follow for the reader. It is good practice to write clean / clear code that can be understand by other people.</p>
</div>
<div id="exercise-3-4" class="section level5 unnumbered question">
<h5>Exercise 3</h5>
<ol style="list-style-type: lower-alpha">
<li><p>Import datafile the first sheet gene_expression_c10.xlsx into R (it is already in the server folder data/lesson3)</p></li>
<li><p>What are the dimension of the dataset?</p></li>
</ol>
</div>
<details>
<summary>
Click for the answer
</summary>
<div class="sourceCode" id="cb266"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb266-1"><a href="lesson-3---importing-data-tidy-data.html#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="co">#(a)</span></span>
<span id="cb266-2"><a href="lesson-3---importing-data-tidy-data.html#cb266-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb266-3"><a href="lesson-3---importing-data-tidy-data.html#cb266-3" aria-hidden="true" tabindex="-1"></a>gene_expression <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data/lesson3/gene_expression_c10.xlsx&quot;</span>)</span>
<span id="cb266-4"><a href="lesson-3---importing-data-tidy-data.html#cb266-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb266-5"><a href="lesson-3---importing-data-tidy-data.html#cb266-5" aria-hidden="true" tabindex="-1"></a><span class="co">#(b)</span></span>
<span id="cb266-6"><a href="lesson-3---importing-data-tidy-data.html#cb266-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(gene_expression) <span class="co"># or look in the environment panel, upper right part of the screen</span></span></code></pre></div>
<pre class="Rout"><code>## [1] 24574     6</code></pre>
</details>
<div id="exercise-3-5" class="section level5 unnumbered question">
<h5>Exercise 3</h5>
<ol style="list-style-type: lower-alpha">
<li><p>Make the dataset of exercise_5.1 tidy</p></li>
<li><p>What are now the dimension of the tidy dataset?</p></li>
</ol>
</div>
<details>
<summary>
Click for the answer
</summary>
<div class="sourceCode" id="cb268"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb268-1"><a href="lesson-3---importing-data-tidy-data.html#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="co">#(a)</span></span>
<span id="cb268-2"><a href="lesson-3---importing-data-tidy-data.html#cb268-2" aria-hidden="true" tabindex="-1"></a>gene_expression_tidy <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(<span class="at">data =</span> gene_expression,</span>
<span id="cb268-3"><a href="lesson-3---importing-data-tidy-data.html#cb268-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&#39;0h&#39;</span>, <span class="st">&#39;3h&#39;</span>,<span class="st">&#39;12h&#39;</span>, <span class="st">&#39;24h&#39;</span>, <span class="st">&#39;48h&#39;</span>), </span>
<span id="cb268-4"><a href="lesson-3---importing-data-tidy-data.html#cb268-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">names_to =</span> <span class="st">&quot;time(hrs)&quot;</span>, </span>
<span id="cb268-5"><a href="lesson-3---importing-data-tidy-data.html#cb268-5" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">values_to =</span> <span class="st">&quot;expression&quot;</span>)</span>
<span id="cb268-6"><a href="lesson-3---importing-data-tidy-data.html#cb268-6" aria-hidden="true" tabindex="-1"></a><span class="co"># or: </span></span>
<span id="cb268-7"><a href="lesson-3---importing-data-tidy-data.html#cb268-7" aria-hidden="true" tabindex="-1"></a>gene_expression_tidy <span class="ot">&lt;-</span> gene_expression <span class="sc">%&gt;%</span> </span>
<span id="cb268-8"><a href="lesson-3---importing-data-tidy-data.html#cb268-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&#39;0h&#39;</span>, <span class="st">&#39;3h&#39;</span>,<span class="st">&#39;12h&#39;</span>, <span class="st">&#39;24h&#39;</span>, <span class="st">&#39;48h&#39;</span>), </span>
<span id="cb268-9"><a href="lesson-3---importing-data-tidy-data.html#cb268-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;time(hrs)&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;expression&quot;</span>)</span>
<span id="cb268-10"><a href="lesson-3---importing-data-tidy-data.html#cb268-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-11"><a href="lesson-3---importing-data-tidy-data.html#cb268-11" aria-hidden="true" tabindex="-1"></a><span class="co">#(b)</span></span>
<span id="cb268-12"><a href="lesson-3---importing-data-tidy-data.html#cb268-12" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(gene_expression_tidy)</span></code></pre></div>
<pre class="Rout"><code>## [1] 122870      3</code></pre>
</details>
</div>
<div id="making_your_data_tidy-spreading" class="section level2">
<h2>Making_your_data_tidy: spreading</h2>
<p>In the <a href="lesson-3---importing-data-tidy-data.html#onderzoektidyvraag">this exercise</a> we noted that table2 is not tidy: 2 row represents 1 observation.</p>
<p><img src="images/03_8_nontidy_table2.jpg" width="60%" /></p>
<p>Note that variable column “Type” contains the names of the variables “Cases” and “Population”. This is the reason that two rows represent 1 observation.</p>
<p>To merge the two rows, representing 1 observation, into 1 row we use the tidyverse function <code>pivot_wider()</code>.</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb270-1"><a href="lesson-3---importing-data-tidy-data.html#cb270-1" aria-hidden="true" tabindex="-1"></a>table2_tidy <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(<span class="at">data =</span> table2, <span class="at">names_from =</span> <span class="st">&quot;type&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;count&quot;</span>)</span>
<span id="cb270-2"><a href="lesson-3---importing-data-tidy-data.html#cb270-2" aria-hidden="true" tabindex="-1"></a>table2_tidy</span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 6 × 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt;
## 1 Afghanistan  1999    745   19987071
## 2 Afghanistan  2000   2666   20595360
## 3 Brazil       1999  37737  172006362
## 4 Brazil       2000  80488  174504898
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
<p>Alternatively we can use the pipe to redirect the data to the pivot_wider() function:</p>
<div id="example-36" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb272"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb272-1"><a href="lesson-3---importing-data-tidy-data.html#cb272-1" aria-hidden="true" tabindex="-1"></a>table2_tidy <span class="ot">&lt;-</span> table2 <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;type&quot;</span>, <span class="at">values_from =</span> <span class="st">&quot;count&quot;</span>)</span></code></pre></div>
</div>
<div id="exercise-3-6" class="section level5 unnumbered question">
<h5>Exercise 3</h5>
<ol style="list-style-type: lower-alpha">
<li><p>Import the second data sheet from datafile gene_expression_c10.xlsx (from the previous question, in server folder data/lesson3) into R</p></li>
<li><p>Make the dataset tidy</p></li>
</ol>
</div>
<details>
<summary>
Click for the answer
</summary>
<div class="sourceCode" id="cb273"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb273-1"><a href="lesson-3---importing-data-tidy-data.html#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="co">#(a)</span></span>
<span id="cb273-2"><a href="lesson-3---importing-data-tidy-data.html#cb273-2" aria-hidden="true" tabindex="-1"></a>gene_expression_sheet2 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data/lesson3/gene_expression_c10.xlsx&quot;</span>, <span class="at">sheet=</span><span class="dv">2</span>)</span>
<span id="cb273-3"><a href="lesson-3---importing-data-tidy-data.html#cb273-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-4"><a href="lesson-3---importing-data-tidy-data.html#cb273-4" aria-hidden="true" tabindex="-1"></a><span class="co">#(b)</span></span>
<span id="cb273-5"><a href="lesson-3---importing-data-tidy-data.html#cb273-5" aria-hidden="true" tabindex="-1"></a>gene_expression_sheet2_tidy <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(<span class="at">data =</span> gene_expression_sheet2, </span>
<span id="cb273-6"><a href="lesson-3---importing-data-tidy-data.html#cb273-6" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">names_from =</span> <span class="st">&quot;assay&quot;</span>, </span>
<span id="cb273-7"><a href="lesson-3---importing-data-tidy-data.html#cb273-7" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">values_from =</span> <span class="st">&quot;value&quot;</span>)</span>
<span id="cb273-8"><a href="lesson-3---importing-data-tidy-data.html#cb273-8" aria-hidden="true" tabindex="-1"></a><span class="co"># or: </span></span>
<span id="cb273-9"><a href="lesson-3---importing-data-tidy-data.html#cb273-9" aria-hidden="true" tabindex="-1"></a>gene_expression_sheet2_tidy <span class="ot">&lt;-</span> gene_expression_sheet2 <span class="sc">%&gt;%</span> </span>
<span id="cb273-10"><a href="lesson-3---importing-data-tidy-data.html#cb273-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&quot;assay&quot;</span>, <span class="at">values_from =</span><span class="st">&quot;value&quot;</span>)</span></code></pre></div>
</details>
</div>
<div id="making_your_data_tidy-separate" class="section level2">
<h2>Making_your_data_tidy: separate</h2>
<p>In <a href="lesson-3---importing-data-tidy-data.html#onderzoektidyvraag">this exercise</a> we noted that <strong>table3</strong> is not tidy: 2 values are present in 1 cell.</p>
<div id="example-37" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb274"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb274-1"><a href="lesson-3---importing-data-tidy-data.html#cb274-1" aria-hidden="true" tabindex="-1"></a>table3</span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 6 × 3
##   country      year rate             
## * &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            
## 1 Afghanistan  1999 745/19987071     
## 2 Afghanistan  2000 2666/20595360    
## 3 Brazil       1999 37737/172006362  
## 4 Brazil       2000 80488/174504898  
## 5 China        1999 212258/1272915272
## 6 China        2000 213766/1280428583</code></pre>
<p>To separate the values in two cells we use the tidyverse function <code>separate()</code>:</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb276-1"><a href="lesson-3---importing-data-tidy-data.html#cb276-1" aria-hidden="true" tabindex="-1"></a>table3_tidy <span class="ot">&lt;-</span> <span class="fu">separate</span>(table3, rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>))</span>
<span id="cb276-2"><a href="lesson-3---importing-data-tidy-data.html#cb276-2" aria-hidden="true" tabindex="-1"></a>table3_tidy</span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 6 × 4
##   country      year cases  population
##   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;     
## 1 Afghanistan  1999 745    19987071  
## 2 Afghanistan  2000 2666   20595360  
## 3 Brazil       1999 37737  172006362 
## 4 Brazil       2000 80488  174504898 
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
<p>The original variable “rate” contained “character” values, namely the two combined values separated by a forward slash. After the separation each new column (“cases” and “population”) contain <strong>numeric</strong> values but the value types are still denoted as <strong>characters</strong>. To convert the character values into numeric values we use the <strong>convert</strong> option.</p>
</div>
<div id="example-38" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb278"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb278-1"><a href="lesson-3---importing-data-tidy-data.html#cb278-1" aria-hidden="true" tabindex="-1"></a>table3_tidy <span class="ot">&lt;-</span> <span class="fu">separate</span>(table3,  rate,  <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>), <span class="at">convert =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Normally you have to specify where the values need to be separated. In this case the forward slash character (“/”). The default option of the <code>separate()</code> funtion is to separate values based on any non-alphanumeric character (i.e. a character that isn’t a number or letter). It is good practice though to write the separation character explicity in your code by using the sep=“character” option.</p>
</div>
<div id="example-39" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb279"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb279-1"><a href="lesson-3---importing-data-tidy-data.html#cb279-1" aria-hidden="true" tabindex="-1"></a>table3_tidy <span class="ot">&lt;-</span> <span class="fu">separate</span>(table3, rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>), <span class="at">convert =</span> <span class="cn">TRUE</span>,  <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>)</span></code></pre></div>
<p>By using the <strong>sep=</strong> option we can also split values based on the a specific <strong>number</strong> of characters. For example we want to use the first three character of each country in our column instead of the full names. We can split the country names by the first three characters.</p>
</div>
<div id="example-40" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb280"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb280-1"><a href="lesson-3---importing-data-tidy-data.html#cb280-1" aria-hidden="true" tabindex="-1"></a><span class="co"># only 1 variable is defined: first 3 characters are stored in variable &quot;country&quot; replacing the original variable &quot;country&quot;</span></span>
<span id="cb280-2"><a href="lesson-3---importing-data-tidy-data.html#cb280-2" aria-hidden="true" tabindex="-1"></a><span class="fu">separate</span>(table3_tidy, country, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>), <span class="at">sep =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 6 × 4
##   country  year  cases population
##   &lt;chr&gt;   &lt;int&gt;  &lt;int&gt;      &lt;int&gt;
## 1 Afg      1999    745   19987071
## 2 Afg      2000   2666   20595360
## 3 Bra      1999  37737  172006362
## 4 Bra      2000  80488  174504898
## 5 Chi      1999 212258 1272915272
## 6 Chi      2000 213766 1280428583</code></pre>
</div>
<div id="exercise-3-7" class="section level5 unnumbered question">
<h5>Exercise 3</h5>
<ol style="list-style-type: lower-alpha">
<li><p>Import datafile gene_expression_c10 (the one without the .xlsx) in the server folder data/lesson3 into R. The data colums are separated by a semicolon.</p></li>
<li><p>Make the dataset tidy</p></li>
</ol>
</div>
<details>
<summary>
Click for the answer
</summary>
<div class="sourceCode" id="cb282"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb282-1"><a href="lesson-3---importing-data-tidy-data.html#cb282-1" aria-hidden="true" tabindex="-1"></a><span class="co">#(a)</span></span>
<span id="cb282-2"><a href="lesson-3---importing-data-tidy-data.html#cb282-2" aria-hidden="true" tabindex="-1"></a>gene_expression_1 <span class="ot">&lt;-</span> <span class="fu">read_csv2</span>(<span class="st">&quot;data/lesson3/gene_expression_c10&quot;</span>)</span></code></pre></div>
<pre><code>## ℹ Using &quot;&#39;,&#39;&quot; as decimal and &quot;&#39;.&#39;&quot; as grouping mark. Use `read_delim()` for more control.</code></pre>
<pre><code>## Rows: 24574 Columns: 2
## ── Column specification ──────────────────────────────────────────────────────────────────────────────────
## Delimiter: &quot;;&quot;
## chr (2): Gene, 0h-3h-12h-24h-48h
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb285"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb285-1"><a href="lesson-3---importing-data-tidy-data.html#cb285-1" aria-hidden="true" tabindex="-1"></a><span class="co">#(b)</span></span>
<span id="cb285-2"><a href="lesson-3---importing-data-tidy-data.html#cb285-2" aria-hidden="true" tabindex="-1"></a>gene_expression_1_tidy <span class="ot">&lt;-</span> <span class="fu">separate</span>(gene_expression_1, <span class="st">&quot;0h-3h-12h-24h-48h&quot;</span>,</span>
<span id="cb285-3"><a href="lesson-3---importing-data-tidy-data.html#cb285-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;0h&quot;</span>, <span class="st">&quot;3h&quot;</span>, <span class="st">&quot;12h&quot;</span>, <span class="st">&quot;24h&quot;</span>, <span class="st">&quot;48h&quot;</span>),  <span class="at">sep =</span> <span class="st">&quot;!&quot;</span>,  <span class="at">convert =</span> <span class="cn">TRUE</span>)</span>
<span id="cb285-4"><a href="lesson-3---importing-data-tidy-data.html#cb285-4" aria-hidden="true" tabindex="-1"></a><span class="co"># or: </span></span>
<span id="cb285-5"><a href="lesson-3---importing-data-tidy-data.html#cb285-5" aria-hidden="true" tabindex="-1"></a>gene_expression_1_tidy <span class="ot">&lt;-</span> gene_expression_1 <span class="sc">%&gt;%</span> <span class="fu">separate</span>(<span class="st">&quot;0h-3h-12h-24h-48h&quot;</span>,</span>
<span id="cb285-6"><a href="lesson-3---importing-data-tidy-data.html#cb285-6" aria-hidden="true" tabindex="-1"></a>                             <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;0h&quot;</span>, <span class="st">&quot;3h&quot;</span>, <span class="st">&quot;12h&quot;</span>, <span class="st">&quot;24h&quot;</span>, <span class="st">&quot;48h&quot;</span>),  <span class="at">sep =</span> <span class="st">&quot;!&quot;</span>,  <span class="at">convert =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>First we separate the values in 5 new variables. But the data is not tidy yet. We have to apply the function <code>pivot_longer()</code> because the new variables are not true variables but values of the variable “time_after_induction”</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb286-1"><a href="lesson-3---importing-data-tidy-data.html#cb286-1" aria-hidden="true" tabindex="-1"></a>gene_expression_1_tidy2 <span class="ot">&lt;-</span> gene_expression_1_tidy <span class="sc">%&gt;%</span>  <span class="fu">pivot_longer</span>(</span>
<span id="cb286-2"><a href="lesson-3---importing-data-tidy-data.html#cb286-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&#39;0h&#39;</span>, <span class="st">&#39;3h&#39;</span>, <span class="st">&#39;12h&#39;</span>, <span class="st">&#39;24h&#39;</span>, <span class="st">&#39;48h&#39;</span>),</span>
<span id="cb286-3"><a href="lesson-3---importing-data-tidy-data.html#cb286-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">names_to =</span> <span class="st">&quot;time_after_induction&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;gene_expression&quot;</span>)</span></code></pre></div>
</details>
</div>
<div id="checking-normality" class="section level2">
<h2>Checking normality</h2>
<p>An important part of data analysis is to perform a statistical test to demonstrate that differences between experimental conditions are significant. In this course we will show how to perform a range of statistical test in R. These tests have been explained in detail in the 2nd year course TLSC-BID3V-17_Dataverwerking (see the figure below) and will only be briefly discussed again during this course. You previously executed them in SPSS or Excel, now we will show how to do them in R.</p>
<div class="tip">
<p>If you realise you have quite forgotten what you learned in TLSC-BID3V-17_Dataverwerking and/or TLSC-EV1V-17, revisit the course content and refresh your knowledge!</p>
<p>BID: canvas should be still up</p>
<p>EV1V: <a href="https://lesmaterialen.rstudio.hu.nl/statistiek-en-excel-reader/">click here for online reader</a></p>
</div>
<div class="figure"><span style="display:block;" id="fig:flowscheme"></span>
<img src="images/08_2_general_flowscheme.jpg" alt="Decision scheme for statistical testing" width="80%" />
<p class="caption">
Figure 6: Decision scheme for statistical testing
</p>
</div>
<div class="tip">
<p>Non-parametric tests in R actually just use the exact same syntax (way of writing the code) as the parametric equivalent, but using a different function name. Therefore, we will only cover the parametric tests within this course, en provide you with a table of non-parametric equivalent function names.</p>
</div>
<p>The most common parametric statistical tests rely on the assumption that the residuals are normally distributed. (Not a clue what we’re talking about? Check the 1th year course on statistics <a href="https://lesmaterialen.rstudio.hu.nl/statistiek-en-excel-reader/meten.html#eerstekeernorm">here</a> and also <a href="https://lesmaterialen.rstudio.hu.nl/statistiek-en-excel-reader/kansverdeling.html#andere-verdelingen">here</a>).</p>
<p>In the cases you will encounter here, this just means the same as the data within each group or variable coming from a population with a normal distribution. You will have learned in the 2nd year course on dataverwerking to perform a <strong>Shapiro-Wilk test</strong> to check this assumption when dealing with interval / ratio data. If any variable or any group data column is not normally distributed, Shapiro-Wilk test will give you a p-value below 0.05 and you have to make use of a non-parametric test.</p>
<div class="tip">
<p>The Shapiro-Wilk test is used to determine whether your data are is normally distributed.</p>
</div>
<p>First, let’s perform a Shapiro-Wilk in R:.</p>
<p>To analyze the normality of a dataset is we will make use of the Shapiro-Wilk test (see figure 2). A statistical test serves to either accepts or reject the null-hypothesis. In the case of the Shapiro-Wilk test the null-hypothesis (H0) is defined as:</p>
<ul>
<li>H0: the sample came from a population that is <strong>not different from</strong> a normally distributed population.</li>
<li>H1: the sample came from a population that <strong>is different from</strong> a normally distributed population.</li>
</ul>
<p>This means that if the p-value is &gt; 0,05 the H0 is accepted and we are allowed to perform a parametric test. (So in contrast to most statistical tests, we generally “want” a p&gt;0.05 here…) It is important to note that all variables being compared must be normally distributed in order to perform a parametric test.</p>
<p>So if you want to investigate the correlation between the length of ears and the maximum running speed in rabbits, both your columns with data on ear length and maximum running speeds need to be “passing the Shapiro Wilk test” if you want to do parametric tests.</p>
<p>And if you are interested in investigating whether mice who inhaled cigarette smoke for quite a while differ in stamina from a control group of mice, you will perform the Shapiro Wilk test on the data from both groups.</p>
<div class="tip">
<p>Remember null hypothesis testing from previous statistics courses:</p>
<ul>
<li>The H0 (null hypothesis) generally states that there is <strong>no</strong> effect or difference.</li>
<li>The p-value gives you the probability of seeing the data when the H0 would be true.</li>
<li>If the p-value is below a value you agreed on before doing the testing (<span class="math inline">\(alpha\)</span>, generally 0.05) then you reject the H0. So, for example in a two sample design: if the data was very, very unlikely (low p-value) in the situation that there is no actual difference between groups (H0), we should reject the idea that there is no actual difference between groups (reject H0) and accept that there is probably a difference between groups (alternative hypothesis, H1).</li>
<li>so: if p&lt;0.05, there is a significant effect/difference/etc.</li>
<li>so: if p&gt;0.05, we cannot say there is a significant effect/difference/etc.</li>
</ul>
</div>
<hr />
<p>To perform the Shapiro-Wilk test of normality for one variable at a time, use the function <code>shapiro.test()</code>.</p>
<p>The function <code>shapiro.test()</code> takes a numeric vector as input and performs the shapiro-wilk test.</p>
<p>The output of shapiro.test() is a list with fixed column names:</p>
<blockquote>
<p>[1] “statistic” “p.value” “method” “data.name”</p>
</blockquote>
<hr />
<p>Let’s demonstrate the shapiro-wilk test with a dataset named <strong>smoking</strong> present in server folder <strong>“data/lesson3”</strong>. The smoking dataset is an unpaired experiment containing two different mice groups: control mice (“Controle”) and a group of mice continuously exposed to cigarette smoke (“Rook”). The measurement values represent minutes of swimming until exhaustion.</p>
<div id="example-41" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb287"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb287-1"><a href="lesson-3---importing-data-tidy-data.html#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb287-2"><a href="lesson-3---importing-data-tidy-data.html#cb287-2" aria-hidden="true" tabindex="-1"></a>smoking <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">&quot;data/lesson3/smoking&quot;</span>)</span>
<span id="cb287-3"><a href="lesson-3---importing-data-tidy-data.html#cb287-3" aria-hidden="true" tabindex="-1"></a>smoking <span class="co">#remember there are more rows, you only get shown the first few</span></span></code></pre></div>
<pre class="Rout"><code>## # A tibble: 21 × 2
##    Controle  Rook
##       &lt;dbl&gt; &lt;dbl&gt;
##  1      181   158
##  2      193   166
##  3      177   184
##  4      183   164
##  5      174   194
##  6      169   163
##  7      173   185
##  8      197   165
##  9      179   189
## 10      197   170
## # … with 11 more rows</code></pre>
<p>To perform a Shapiro-Wilk test, simply type:</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb289-1"><a href="lesson-3---importing-data-tidy-data.html#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shapiro.test</span>(smoking<span class="sc">$</span>Controle)</span></code></pre></div>
<pre class="Rout"><code>## 
##  Shapiro-Wilk normality test
## 
## data:  smoking$Controle
## W = 0.96615, p-value = 0.6473</code></pre>
<div class="sourceCode" id="cb291"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb291-1"><a href="lesson-3---importing-data-tidy-data.html#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shapiro.test</span>(smoking<span class="sc">$</span>Rook)</span></code></pre></div>
<pre class="Rout"><code>## 
##  Shapiro-Wilk normality test
## 
## data:  smoking$Rook
## W = 0.94119, p-value = 0.2301</code></pre>
<p>Both variables of the dataset “smoking” have a p-value &gt; 0,05 meaning we can perform a parametric test.</p>
</div>
</div>
<div id="map-functions" class="section level2">
<h2>map functions</h2>
<p>In the example we performed the Shapiro-Wilk test twice. This is because the <code>shapiro.test()</code> function accepts one vector at a time. This makes the code repetitive and generally in coding we want to avoid repetitive code as it is prone to errors.</p>
<p>If we want to perform the same function on all variables of a dataframe (tibble) we can make use of a series of map functions:</p>
<blockquote>
<p><code>map()</code> makes a list.</p>
</blockquote>
<blockquote>
<p><code>map_lgl()</code> makes a logical vector</p>
</blockquote>
<blockquote>
<p><code>map_int()</code> makes an integer vector</p>
</blockquote>
<blockquote>
<p><code>map_dbl()</code> makes a numerical vector</p>
</blockquote>
<blockquote>
<p><code>map_chr()</code> makes a character vector</p>
</blockquote>
<div id="exercise-3-8" class="section level5 unnumbered question">
<h5>Exercise 3</h5>
<p>Make sure you understand the difference between logical, integer, numerical, and character. Google it.</p>
</div>
<p>For example, if we want the sum of each variable in dataset smoking we will use <code>map_dbl()</code>. The output of the <code>sum()</code> function will be stored in a numeric vector of type dbl (double)</p>
<div id="example-42" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb293"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb293-1"><a href="lesson-3---importing-data-tidy-data.html#cb293-1" aria-hidden="true" tabindex="-1"></a>smoking <span class="sc">%&gt;%</span> <span class="fu">map_dbl</span>(sum)</span></code></pre></div>
<pre class="Rout"><code>## Controle     Rook 
##     3799     3698</code></pre>
<p>If we want to perform the Shapiro-Wilk test on each variable of dataset smoking we will use <code>map()</code> as the output of the <code>shapiro.test()</code> function is a list. For each variable of the smoking dataset, a list is produced and these lists are combined and stored in a new list (thus, the elements of the final list consist of lists!)</p>
</div>
<div id="example-43" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb295"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb295-1"><a href="lesson-3---importing-data-tidy-data.html#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="co"># shapiro.test() outputs multipe lines: use map() to store as list</span></span>
<span id="cb295-2"><a href="lesson-3---importing-data-tidy-data.html#cb295-2" aria-hidden="true" tabindex="-1"></a>SW_smoking <span class="ot">&lt;-</span> smoking <span class="sc">%&gt;%</span> <span class="fu">map</span>(shapiro.test)         </span>
<span id="cb295-3"><a href="lesson-3---importing-data-tidy-data.html#cb295-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(SW_smoking)                                                                                      </span></code></pre></div>
<pre class="Rout"><code>## [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb297"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb297-1"><a href="lesson-3---importing-data-tidy-data.html#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the output of map() is a list containing two list elements</span></span>
<span id="cb297-2"><a href="lesson-3---importing-data-tidy-data.html#cb297-2" aria-hidden="true" tabindex="-1"></a><span class="co"># each list element contains the p-value of the Shapiro-Wilk test</span></span>
<span id="cb297-3"><a href="lesson-3---importing-data-tidy-data.html#cb297-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(SW_smoking)</span></code></pre></div>
<pre class="Rout"><code>## List of 2
##  $ Controle:List of 4
##   ..$ statistic: Named num 0.966
##   .. ..- attr(*, &quot;names&quot;)= chr &quot;W&quot;
##   ..$ p.value  : num 0.647
##   ..$ method   : chr &quot;Shapiro-Wilk normality test&quot;
##   ..$ data.name: chr &quot;.x[[i]]&quot;
##   ..- attr(*, &quot;class&quot;)= chr &quot;htest&quot;
##  $ Rook    :List of 4
##   ..$ statistic: Named num 0.941
##   .. ..- attr(*, &quot;names&quot;)= chr &quot;W&quot;
##   ..$ p.value  : num 0.23
##   ..$ method   : chr &quot;Shapiro-Wilk normality test&quot;
##   ..$ data.name: chr &quot;.x[[i]]&quot;
##   ..- attr(*, &quot;class&quot;)= chr &quot;htest&quot;</code></pre>
<p>We see that the output of the Shapiro-Wilk test is stored as a list containing two elements, one for each variable. The elements in the list are lists themselves containing the summary information of the Shapiro-Wilk test.</p>
<p>What we are really interested in is the p-value (NOTE: in the list stored as p.value). We can automatically substract the p-values by adding another <code>map()</code> function. As the p-values are numbers we select the <code>map_dbl()</code> function so the p-values will be stored in a numeric vector.</p>
</div>
<div id="example-44" class="section level6">
<h6>Example</h6>
<div class="sourceCode" id="cb299"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb299-1"><a href="lesson-3---importing-data-tidy-data.html#cb299-1" aria-hidden="true" tabindex="-1"></a>smoking <span class="sc">%&gt;%</span> <span class="fu">map</span>(shapiro.test) <span class="sc">%&gt;%</span> <span class="fu">map_dbl</span>(<span class="st">&quot;p.value&quot;</span>)</span></code></pre></div>
<pre class="Rout"><code>##  Controle      Rook 
## 0.6473373 0.2300624</code></pre>
<p>We see that both p-values are above 0,05. We accept the H0 and conclude that both samples are normally distributed. We are allowed to perform a parametric test.</p>
</div>
<div id="exercise-7" class="section level5 question">
<h5>Exercise 7</h5>
<p>Dataset Shapiro_Wilk present in server folder /data/lesson3 contains 10 samples with hematocrit values.<br />
Write an R code to determine which samples are not normally distributed.</p>
</div>
<details>
<summary>
Click for the answer
</summary>
<div class="sourceCode" id="cb301"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb301-1"><a href="lesson-3---importing-data-tidy-data.html#cb301-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb301-2"><a href="lesson-3---importing-data-tidy-data.html#cb301-2" aria-hidden="true" tabindex="-1"></a><span class="co"># load the data</span></span>
<span id="cb301-3"><a href="lesson-3---importing-data-tidy-data.html#cb301-3" aria-hidden="true" tabindex="-1"></a>SW <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">&quot;data/lesson3/Shapiro_Wilk&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 20 Columns: 10
## ── Column specification ──────────────────────────────────────────────────────────────────────────────────
## Delimiter: &quot;\t&quot;
## dbl (10): dataset1, dataset2, dataset3, dataset4, dataset5, dataset6, dataset7, dataset8, dataset9, da...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb303"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb303-1"><a href="lesson-3---importing-data-tidy-data.html#cb303-1" aria-hidden="true" tabindex="-1"></a>SW_pvalues <span class="ot">&lt;-</span> SW <span class="sc">%&gt;%</span> </span>
<span id="cb303-2"><a href="lesson-3---importing-data-tidy-data.html#cb303-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(shapiro.test) <span class="sc">%&gt;%</span> <span class="co"># perform Shapiro-Wilk test</span></span>
<span id="cb303-3"><a href="lesson-3---importing-data-tidy-data.html#cb303-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dbl</span>(<span class="st">&quot;p.value&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># extract p-values</span></span>
<span id="cb303-4"><a href="lesson-3---importing-data-tidy-data.html#cb303-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">3</span>) <span class="co">#round them down to 3 digits</span></span>
<span id="cb303-5"><a href="lesson-3---importing-data-tidy-data.html#cb303-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb303-6"><a href="lesson-3---importing-data-tidy-data.html#cb303-6" aria-hidden="true" tabindex="-1"></a><span class="co"># select those that are significant (ie: not normally distributed)</span></span>
<span id="cb303-7"><a href="lesson-3---importing-data-tidy-data.html#cb303-7" aria-hidden="true" tabindex="-1"></a>SW_pvalues[SW_pvalues <span class="sc">&lt;</span> <span class="fl">0.05</span>]</span></code></pre></div>
<pre class="Rout"><code>## dataset1 dataset8 
##    0.031    0.019</code></pre>
</details>
<!--- To be finished and included later if I ever have the time
https://towardsdatascience.com/stop-testing-for-normality-dba96bb73f90

### Q-Q plots
Now, there are some issues with using a Shapiro-Wilk. Mainly in the next course (DAUR2) you will encounter very large datasets. Remember what the p-value of a null hypothesis test means: it is the probability of finding the data that you found, if the null hypothesis was correct. What happens when you use such null hypothesis testing with big datasets is that the larger amount of data increases your ability to detect very small deviations from what you would have expected to see when the null hypothesis would be correct. Therefore, at sufficiently large dataset sizes, even tiny effects may become statistically significant. 

But why?
Perhaps you will remember how to calculate z-values from the first year course on Statistiek&Excel. You will remember that 



Shapiro-Wilk is not any different in this sense, so with datasets over about 200 datapoints, Shapiro Wilk will nearly always tell you you have non-normally distributed data (residuals).Luckily, there are other ways to inspect your data: 
-->
</div>
<div id="histograms" class="section level2">
<h2>Histograms</h2>
<p>A <strong>histogram</strong> is a representation of the distribution of numerical (continuous) data. A histogram divides the x-axis into equally spaced bins and then uses the height of a bar to display the number of observations that fall in each bin. Histograms are often used to inspect the distribution of a dataset. A fundamental skill in data science is to visualize your data clearly and honestly.</p>
<p>We will use the package <strong>ggplot2</strong> to make graphs in R (part of the <strong>tidyverse</strong> , so doesn’t have to be loaded separately from tidyverse).</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb305-1"><a href="lesson-3---importing-data-tidy-data.html#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)   </span></code></pre></div>
<p>ggplot graphics are build with layers. In different layers, you provide ggplot with information about the data (<strong>data</strong>), how you want the graph to look like (<strong>aesthetics</strong>), and what kind of graph it should be (<strong>geom function</strong>).</p>
<p>We will take a look at a hypothetical follow up experiment on the smoking data we used previously, using 200 mice who got nicotine patches or not. The dependent variable was minutes of swimming until exhaustion. I will spare the poor mice the exhaustion and generate the data for this example. Run this code to generate the fake data:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb306-1"><a href="lesson-3---importing-data-tidy-data.html#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb306-2"><a href="lesson-3---importing-data-tidy-data.html#cb306-2" aria-hidden="true" tabindex="-1"></a>smoking2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb306-3"><a href="lesson-3---importing-data-tidy-data.html#cb306-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">controle =</span> <span class="fu">rnorm</span>(<span class="dv">200</span>,<span class="dv">180</span>,<span class="dv">15</span>),</span>
<span id="cb306-4"><a href="lesson-3---importing-data-tidy-data.html#cb306-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">patch =</span> <span class="fu">rnorm</span>(<span class="dv">200</span>,<span class="dv">160</span>,<span class="dv">25</span>)</span>
<span id="cb306-5"><a href="lesson-3---importing-data-tidy-data.html#cb306-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Let’s look at the minimum and maximum swimming times in the patch group:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb307-1"><a href="lesson-3---importing-data-tidy-data.html#cb307-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(smoking2<span class="sc">$</span>patch) <span class="do">## minimum minutes of swimming until exhaustion</span></span></code></pre></div>
<pre class="Rout"><code>## [1] 98.35255</code></pre>
<div class="sourceCode" id="cb309"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb309-1"><a href="lesson-3---importing-data-tidy-data.html#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(smoking2<span class="sc">$</span>patch) <span class="do">## maximum minutes of swimming until exhaustion</span></span></code></pre></div>
<pre class="Rout"><code>## [1] 224.2865</code></pre>
<p>In order to see the distribution of the swimming times between the minimum and maximum values we will make a distribution plot, a histogram. It is build as:</p>
<ol style="list-style-type: decimal">
<li>a layer with the data and aesthetics (aes)</li>
<li>a layer telling ggplot we want a histogram</li>
<li>a layer setting the title and axes</li>
</ol>
<div class="sourceCode" id="cb311"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb311-1"><a href="lesson-3---importing-data-tidy-data.html#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> smoking2, <span class="fu">aes</span>(<span class="at">x =</span> patch)) <span class="sc">+</span> </span>
<span id="cb311-2"><a href="lesson-3---importing-data-tidy-data.html#cb311-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()<span class="sc">+</span></span>
<span id="cb311-3"><a href="lesson-3---importing-data-tidy-data.html#cb311-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb311-4"><a href="lesson-3---importing-data-tidy-data.html#cb311-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Distribution of swimming times of patch mice&quot;</span>,</span>
<span id="cb311-5"><a href="lesson-3---importing-data-tidy-data.html#cb311-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x=</span> <span class="st">&quot;swimming time (min)&quot;</span>,</span>
<span id="cb311-6"><a href="lesson-3---importing-data-tidy-data.html#cb311-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y=</span> <span class="st">&quot;count&quot;</span>)</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-181-1.png" width="672" /></p>
<p>We can choose the bin size. The bin size, is the range on the x-axis that represents the width of each bar in the histogram. We can change it if we like:</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb313-1"><a href="lesson-3---importing-data-tidy-data.html#cb313-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> smoking2, <span class="fu">aes</span>(<span class="at">x =</span> patch)) <span class="sc">+</span> </span>
<span id="cb313-2"><a href="lesson-3---importing-data-tidy-data.html#cb313-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10</span>)<span class="sc">+</span></span>
<span id="cb313-3"><a href="lesson-3---importing-data-tidy-data.html#cb313-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb313-4"><a href="lesson-3---importing-data-tidy-data.html#cb313-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Distribution of swimming times of control mice&quot;</span>,</span>
<span id="cb313-5"><a href="lesson-3---importing-data-tidy-data.html#cb313-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x=</span> <span class="st">&quot;swimming time (min)&quot;</span>,</span>
<span id="cb313-6"><a href="lesson-3---importing-data-tidy-data.html#cb313-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y=</span> <span class="st">&quot;count&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-182-1.png" width="672" /></p>
<p>To make separate histograms for the control and the patch group in the same figure, we could make the data tidy and add an extra layer to ggplot called <code>facet_wrap()</code>:</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb314-1"><a href="lesson-3---importing-data-tidy-data.html#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tidy data: each variable in 1 column</span></span>
<span id="cb314-2"><a href="lesson-3---importing-data-tidy-data.html#cb314-2" aria-hidden="true" tabindex="-1"></a>smoking2_tidy <span class="ot">&lt;-</span>  <span class="fu">pivot_longer</span>(<span class="at">data =</span> smoking2, <span class="at">cols =</span> <span class="fu">c</span>(controle, patch),  </span>
<span id="cb314-3"><a href="lesson-3---importing-data-tidy-data.html#cb314-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">names_to =</span> <span class="st">&quot;group&quot;</span>,  <span class="at">values_to =</span> <span class="st">&quot;swimming_time&quot;</span>)</span>
<span id="cb314-4"><a href="lesson-3---importing-data-tidy-data.html#cb314-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-5"><a href="lesson-3---importing-data-tidy-data.html#cb314-5" aria-hidden="true" tabindex="-1"></a><span class="co"># create histograms</span></span>
<span id="cb314-6"><a href="lesson-3---importing-data-tidy-data.html#cb314-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> smoking2_tidy, <span class="fu">aes</span>(<span class="at">x =</span> swimming_time)) <span class="sc">+</span> </span>
<span id="cb314-7"><a href="lesson-3---importing-data-tidy-data.html#cb314-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10</span>)<span class="sc">+</span></span>
<span id="cb314-8"><a href="lesson-3---importing-data-tidy-data.html#cb314-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb314-9"><a href="lesson-3---importing-data-tidy-data.html#cb314-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Distribution of swimming times of control mice&quot;</span>,</span>
<span id="cb314-10"><a href="lesson-3---importing-data-tidy-data.html#cb314-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x=</span> <span class="st">&quot;swimming time (min)&quot;</span>,</span>
<span id="cb314-11"><a href="lesson-3---importing-data-tidy-data.html#cb314-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y=</span> <span class="st">&quot;count&quot;</span>)<span class="sc">+</span></span>
<span id="cb314-12"><a href="lesson-3---importing-data-tidy-data.html#cb314-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> group) </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-183-1.png" width="672" /></p>
<p>This is your first time using ggplot! Nice.</p>
<div id="exercise-3-9" class="section level5 unnumbered question">
<h5>Exercise 3</h5>
<p>To generate random numbers of the standard normal distribution we make use of the function <code>rnorm()</code>. To generate 1000 random values of the standard normal distribution run rnorm(n = 1000).</p>
<ol style="list-style-type: lower-alpha">
<li>Use the function rnorm() to generate a tibble with 1000 random values of the standard normal distribution.</li>
<li>Create a histogram of the 1000 random values of (a). Use a binwidth of 0.2.</li>
</ol>
</div>
<details>
<summary>
Click for the answer
</summary>
<ol style="list-style-type: lower-alpha">
<li></li>
</ol>
<div class="sourceCode" id="cb315"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb315-1"><a href="lesson-3---importing-data-tidy-data.html#cb315-1" aria-hidden="true" tabindex="-1"></a>normal_dist <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>))</span></code></pre></div>
<ol start="2" style="list-style-type: lower-alpha">
<li>Note that as we randomly generated numbers, your graph will look a bit different. You almost certainly generated different random nnumers than we did when we made this reader.</li>
</ol>
<div class="sourceCode" id="cb316"><pre class="sourceCode r Rchunk"><code class="sourceCode r"><span id="cb316-1"><a href="lesson-3---importing-data-tidy-data.html#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> normal_dist, <span class="fu">aes</span>(<span class="at">x =</span> x)) <span class="sc">+</span></span>
<span id="cb316-2"><a href="lesson-3---importing-data-tidy-data.html#cb316-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.2</span>)</span></code></pre></div>
<img src="_main_files/figure-html/unnamed-chunk-185-1.png" width="672" />
</details>
</div>
<div id="overview-r-functions" class="section level2">
<h2>Overview R functions</h2>
<div id="data-import-of-plain-text-files" class="section level4">
<h4>Data import of plain text files</h4>
<table>
<thead>
<tr class="header">
<th>function</th>
<th>package</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>read_csv()</td>
<td>tidyverse</td>
</tr>
<tr class="even">
<td>read_csv2()</td>
<td>tidyverse</td>
</tr>
<tr class="odd">
<td>read_tsv()</td>
<td>tidyverse</td>
</tr>
<tr class="even">
<td>read_delim()</td>
<td>tidyverse</td>
</tr>
<tr class="odd">
<td>read_fwf()</td>
<td>tidyverse</td>
</tr>
<tr class="even">
<td>read_table()</td>
<td>tidyverse</td>
</tr>
<tr class="odd">
<td>colnames()</td>
<td>tidyverse</td>
</tr>
<tr class="even">
<td>rename()</td>
<td>tidyverse</td>
</tr>
<tr class="odd">
<td>saveRDS()</td>
<td>base</td>
</tr>
<tr class="even">
<td>readRDS</td>
<td>base</td>
</tr>
</tbody>
</table>
</div>
<div id="data-import-of-excel-files" class="section level4">
<h4>Data import of Excel files</h4>
<table>
<thead>
<tr class="header">
<th>function</th>
<th>package</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>read_excel()</td>
<td>readxl</td>
</tr>
<tr class="even">
<td>excel_sheets()</td>
<td>readxl</td>
</tr>
</tbody>
</table>
</div>
<div id="inspecting-your-data-1" class="section level4">
<h4>Inspecting your data</h4>
<table>
<thead>
<tr class="header">
<th>function</th>
<th>package</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>system()</td>
<td>base</td>
</tr>
<tr class="even">
<td>as_tibble()</td>
<td>tidyverse</td>
</tr>
<tr class="odd">
<td>is.na()</td>
<td>base</td>
</tr>
<tr class="even">
<td>levels()</td>
<td>base</td>
</tr>
</tbody>
</table>
</div>
<div id="tidy-data" class="section level4">
<h4>Tidy Data</h4>
<table>
<thead>
<tr class="header">
<th>function</th>
<th>package</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>pivot_longer()</td>
<td>tidyverse</td>
</tr>
<tr class="even">
<td>pivot_wider()</td>
<td>tidyverse</td>
</tr>
<tr class="odd">
<td>separate()</td>
<td>tidyverse</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lesson-2---data-types-and-structures-in-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lesson-4---answering-research-questions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
